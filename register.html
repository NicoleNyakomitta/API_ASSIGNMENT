<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Register — Restaurant</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="form-container">
    <h2>Create an Account</h2>
    <form id="regForm" action="register.php" method="POST" novalidate>
      <input id="first_name" name="first_name" type="text" placeholder="First Name" required>
      <input id="last_name" name="last_name" type="text" placeholder="Last Name" required>
      <input id="phone_number" name="phone_number" type="tel" placeholder="07XXXXXXXX" required>
      <input id="email" name="email" type="email" placeholder="Email Address" required>
      <input id="password" name="password" type="password" placeholder="Password" required>
      <input id="password_confirm" name="password_confirm" type="password" placeholder="Confirm Password" required>
      <div id="errors" class="error" aria-live="polite"></div>
      <input type="submit" value="Register">
    </form>
  </div>

  <script>
  // Client-side validation
  (function(){
    const form = document.getElementById('regForm');
    const errorsDiv = document.getElementById('errors');

    function validatePhone(phone){
      // Kenyan mobile example: starts with 07 or +2547 or 7
      return /^(?:\+254|0)?7\d{8}$/.test(phone);
    }

    function validatePassword(pw){
      // at least 8 chars, letters and numbers
      return /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/.test(pw);
    }

    form.addEventListener('submit', function(e){
      errorsDiv.textContent = '';
      const first = form.first_name.value.trim();
      const last = form.last_name.value.trim();
      const phone = form.phone_number.value.trim();
      const email = form.email.value.trim();
      const pw = form.password.value;
      const pwc = form.password_confirm.value;

      const errors = [];
      if (!first) errors.push('First name is required.');
      if (!last) errors.push('Last name is required.');
      if (!validatePhone(phone)) errors.push('Phone number looks invalid.');
      if (!email || !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)) errors.push('Valid email is required.');
      if (!validatePassword(pw)) errors.push('Password must be at least 8 characters and include letters and numbers.');
      if (pw !== pwc) errors.push('Passwords do not match.');

      if (errors.length) {
        e.preventDefault();
        errorsDiv.innerHTML = errors.join('<br>');
        return false;
      }
      // else allow submit — server-side will re-validate
    });
  })();
  
  </script>
  <script src="script.js"></script>
</body>
</html>
